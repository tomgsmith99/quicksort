<!DOCTYPE html>

<html>
    <head>
        <title>Tom's Quicksort</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <script src="jquery-2.1.4.min.js" type ="text/javascript"></script>
        <script src="jquery.btree.js" type = "text/javascript"></script>

        <script src="wz_jsgraphics.js" type="text/javascript"></script>
        <script type="text/javascript">
            var myTree;
            $(function(){
        	// myTree = $("#treeDiv").btree()[0];
                myTree = $("#auditorium").btree({horizontal: ""})[0];

            });
        </script>
        
        <script type ="text/javascript">
            var qsCount = 0;
            
            var listOfArrays = [];
            var z = 0;
            
            var Leaf = function (index) {
                console.log("the address of the leaf is: " + index);
            };

            function quickSort(A, left, right) {
                var pivot;
                
                qsCount = qsCount + 1;
                $("#quicksort").append("<p>----------QSBEGIN----------.");

                $("#quicksort").append("<p>Starting the qs function.");
                $("#quicksort").append("<p>Iteration number: " + qsCount);
                $("#quicksort").append("<p>The value of left is: " + left);
                $("#quicksort").append("<p>The value of right is: " + right);

                // if (qsCount > 5) {return;}
                if (left < right) {
                    pivot = partition(A, left, right);
                    $("#quicksort").append("<p>pivot is: " + pivot + "<p>");
                    quickSort (A, left, pivot);
                    // printArray(A[left:pivot])
                    quickSort (A, (pivot+1), right);
                }
                else if (left === right) { // Note: this clause is not needed for qs!
                    listOfArrays.push(A[left]);
                    // console.log("Singleton array is: " + A[left]);
                }

            }
            
            function partition(A, left, right){
                var pivot = A[left];
                var i = left;

                // $("#quicksort").append("Starting partition: " + A.join(' '));
                $("#quicksort").append("<p>--------PBEGIN------------");
                
                $("#quicksort").append("<p>");
                for (k = left; k<=right; k++) {
                    $("#quicksort").append(A[k] + " ");
                }
                
                for (j = left; j <= right; j++){
                    // $("#quicksort").append("<p>The pivot is: " + pivot);
                    $("#quicksort").append("<p>The index of j is: " + j);
                    $("#quicksort").append("<p>The index of i is: " + i);
                    
                    // $("#quicksort").append(A.join(' '));
                    
                    $("#quicksort").append("<p>Comparing A[j] (" + A[j] + ") to the pivot value: " + pivot + "<p>");
                    if (A[j] <= pivot) {
                        $("#quicksort").append("<p>A[j] is less than or equal to the pivot, so we are going to swap A[j] " + A[j] + " with A[i]: " + A[i]);
                        temp = A[j];
                        A[j] = A[i];
                        A[i] = temp;
                        // var j = i;
                        // j is the smaller value that needs to be moved to the lrft
                        $("#quicksort").append("<p>");
                        for (k = left; k<=right; k++) {
                            $("#quicksort").append(A[k] + " ");
                        }
                        
                        /**
                        $("#quicksort").append("<p>the j value is now " + A[j]);
                        $("#quicksort").append("<p>the i value is now " + A[i]);
                        $("#quicksort").append("<p>the index of the pivot is now: " + A.indexOf(pivot));
*/
                        i = i + 1;

                    }
                    else { $("#quicksort").append("<p>A[j] is greater than the pivot value, so no values were swapped.");}
                    $("#quicksort").append("<p>i is now: " + i);

                    $("#quicksort").append("<p>");
                    for (k = left; k<=right; k++) {
                        $("#quicksort").append(A[k] + " ");
                    }
                    $("#quicksort").append("<p>---------</p>");
                    // $("#quicksort").append(A.join(' '));
                }
                
                $("#quicksort").append("<p>For loop complete. Swapping the A[i-1] value " + A[i-1] + " with the pivot " + A[left]);

                temp = A[i -1];
                A[i - 1] = A[left];
                A[left] = temp;
                
                $("#quicksort").append("<p>This partition is now: ");
                
                $("#quicksort").append("<p>");
                
                thisArray = [];

                for (k = left; k <= right; k++) {
                    $("#quicksort").append(A[k] + " ");
                    thisArray.push(A[k]);
                }
                
                listOfArrays.push(thisArray);

                $("#quicksort").append("<p>The full array is now: " + A.join(' '));

                $("#quicksort").append("<p>The length of the list of Arrays is now: " + listOfArrays.length);

                retVal = i - 1;
                return retVal;
            }
            
            window.onload = function () {
                var A = [17, 35, 12, 32, 6, 102, 4, 8, 43, 50];
                 // var A = [0, -1];

                quickSort(A, 0, (A.length - 1));
                
                $("#quicksort").append("<p>COMPLETE! The full array is now: " + A.join(' '));

                $("#quicksort").append("<p>The list of Arrays is: ");
                
                listOfArrays.forEach(function(anArray) {
                    // console.log("trying to show an array");
                    console.log(anArray);
                });

                $("#quicksort").append("<p>The length of the list of Arrays is now: " + listOfArrays.length);
                
                // var leaf = new Leaf(0);
                
                buildTree();

            };
            
            binaryTree = [];
            /*
            function buildTree() {
                listOfArrays.forEach(function(item) {
                    if (item.l)
                    
                })
                
            }*/

            var Leaf = function (index) {
                console.log("the address of the leaf is: " + index);
                this.hasParent = false;
            };
            
            Leaf.prototype.hasParent = function() {
                return this.hasParent;
            };
            
            /*
            window.onload = function () {
                var leaf = new Leaf(0);
            };
            */
           
            var arrayOfChildrenNames = ["Amir Rahnama", "Mahshid Rahnama"];
            var arrayOfFamilyMemberNames = ["Davood Rahnama", "Maryam Toloo", "Amir Rahnama", "Mahshid Rahnama"];

            // var isarrayOfNamesSubsetOfFamily = arrayOfChildrenNames.every(function(val) { return arrayOfFamilyMemberNames.indexOf(val) >= 0; }));
            
            // console.log(isarrayOfNamesSubsetOfFamily); // true
            
            function buildTree() {
                j = listOfArrays.length - 1;
                for (i = listOfArrays.length - 1; i >= 0; i--) {
                    console.log("the value is: " + listOfArrays[i]);

                    var leaf = new Leaf(i);

                    j = i - 1;

                    while (leaf.hasParent === false) {
                        var child = listOfArrays[i];
                        var potParent = listOfArrays[j];
                        
                        if (Array.isArray(potParent)) {
                            // continue;
                            console.log("potential parent: " + potParent);
                            
                            if (typeof child === "number") {
                                if (potParent.indexOf(child) !== -1) {
                                    leaf.hasParent = true;
                                    console.log(child + " is a member of " + potParent);
                                }
                            }
                            leaf.hasParent = true;
                        }
                        else {
                            j = j - 1;
                        }
                        /*
                        console.log("this leaf has no parent.");
                        if (typeof listOfArrays[i] === "number") {
                            if (Array.isArray(listOfArrays[j])) { // potential parent is an array
                                if (listOfArrays[j].indexOf(listOfArrays[i]) !== -1) {
                                    console.log("found the parent.");
                                    leaf.hasParent = true;
                                }
                            }
                        }
                        else {
                            if (Array.isArray(listOfArrays[j])) {
                                
                            
                                
                            }
                        }
                        */
                    }

                    
                }
            }
            // sort();
        </script>
<!--            /*

            def quickSort(A, left, right): # Accept the array and arbitrary values for left
    # and right. In practice, left should always be less than right, except in
    # the case where the array has a length of 1, and in that case,
    # left is equal to right.

    if left < right: # this will always execute, unless 1) left > right, which
        # should not happen if we've constructed the Partition function properly
        # (and also passed in good values to start) or 2) left = right, in which case 
        
        pivot = partition(A, left, right) # get a pivot value between the left index and the right index
        printArray(A)
        printArray(A[left:pivot])
        quickSort (A, left, pivot)
        printArray(A[left:pivot])
        quickSort (A, (pivot+1), right)
        x = pivot + 1
        printArray(A[x:right])

def partition(A, left, right):
    pivot = A[left]

    while True:
        while A[right] > pivot:
            right = right - 1
        while A[left]  < pivot:
            left = left + 1
        if left < right:
            temp = A[left]
            A[left] = A[right]
            A[right] = temp
        else:
            # printArray(A)
            return right

quickSort(A, 0, (len(A) - 1))
# partition(A, 0, (len(A) - 1))

        </script>-->


    </head>
    <body>
        
        <div id ="quicksort">
            <p>here's some text.</p>
        </div>
        
        <div id ="auditorium" style="overflow: hidden; height: 10px; border-style: solid; border-width: 3px; border-color: #000000;">
	<div style="border-style: inset;" id="box1">
		<span>Box1</span>
	</div>
	<div style="border-style: inset;">
		<span>Box2</span>
	</div>
	<div style="border-style: inset;">
		<span>Box3</span>
	</div>
	<div style="border-style: inset;">
		<span>Box4</span>
	</div>
	<div style="border-style: inset;">
		<span>Box5</span>
	</div>
	<div style="border-style: inset;">
		<span>Box6</span>
	</div>
	<div style="border-style: inset;">
		<span>Box7</span>
	</div>
	<div style="border-style: inset;">
		<span>Box8</span>
	</div>
	<div style="border-style: inset;">
		<span>Box9</span>
	</div>
	<div style="border-style: inset;">
		<span>Box10<br/></span>
	</div>
	<div style="border-style: inset;">
		<span>Box11</span>
	</div>
	<div style="border-style: inset;">
		<span>Box12</span>
	</div>
	<div style="border-style: inset;">
		<span>Box13</span>
	</div>
	<div style="border-style: inset;">
		<span>Box14</span>
	</div>
	<div style="border-style: inset;">
		<span>Box15</span>
	</div>
        </div>
    </body>
</html>